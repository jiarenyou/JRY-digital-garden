# 核心记录系统需求文档

## 介绍

核心记录系统是Kairos应用的基础功能，实现用户快速记录四种类型的个人成长数据：心情、觉察、灵感和反思。该系统需要提供极简的用户体验，让用户能够在几秒钟内完成记录，同时为后续的AI分析和可视化功能提供结构化数据基础。

## 需求

### 需求1：四类记录入口系统

**用户故事：** 作为一个希望记录个人成长的用户，我想要能够快速选择并记录不同类型的内容（心情、觉察、灵感、反思），以便准确捕捉当下的状态和想法。

#### 验收标准

1. WHEN 用户打开应用首页 THEN 系统 SHALL 显示四个明确的记录入口：心情、觉察、灵感、反思
2. WHEN 用户点击任一记录类型 THEN 系统 SHALL 打开对应的记录界面
3. WHEN 用户在记录界面 THEN 系统 SHALL 显示当前记录类型的图标和名称
4. IF 用户选择心情记录 THEN 系统 SHALL 提供1-10的情绪评分滑块
5. WHEN 用户完成记录 THEN 系统 SHALL 自动添加时间戳和记录类型标签

### 需求2：快速记录功能

**用户故事：** 作为一个忙碌的用户，我想要能够在最短时间内完成记录，以便不错过任何重要的觉察时刻。

#### 验收标准

1. WHEN 用户进入记录界面 THEN 系统 SHALL 在3秒内完成页面加载
2. WHEN 用户开始输入文字 THEN 系统 SHALL 实时保存草稿
3. WHEN 用户点击保存按钮 THEN 系统 SHALL 在1秒内完成保存并返回主界面
4. IF 用户意外退出记录界面 THEN 系统 SHALL 保留草稿内容
5. WHEN 用户重新进入记录界面 THEN 系统 SHALL 恢复之前的草稿内容

### 需求3：数据结构与存储

**用户故事：** 作为系统管理员，我需要确保用户数据被正确结构化存储，以便为后续的分析和可视化功能提供支持。

#### 验收标准

1. WHEN 用户创建记录 THEN 系统 SHALL 存储记录类型、内容、时间戳、情绪评分（如适用）
2. WHEN 数据保存到本地数据库 THEN 系统 SHALL 使用统一的数据模型
3. IF 记录类型为心情 THEN 系统 SHALL 额外存储1-10的数值评分
4. WHEN 用户删除记录 THEN 系统 SHALL 软删除并保留30天恢复期
5. WHEN 应用启动 THEN 系统 SHALL 验证数据完整性

### 需求4：记录历史管理

**用户故事：** 作为用户，我想要能够查看、编辑和管理我的历史记录，以便维护我的个人成长档案。

#### 验收标准

1. WHEN 用户查看记录列表 THEN 系统 SHALL 按时间倒序显示所有记录
2. WHEN 用户点击历史记录 THEN 系统 SHALL 显示记录详情和编辑选项
3. WHEN 用户编辑记录 THEN 系统 SHALL 保留编辑历史和原始创建时间
4. WHEN 用户搜索记录 THEN 系统 SHALL 支持按内容、类型、日期范围搜索
5. IF 用户删除记录 THEN 系统 SHALL 要求确认并提供撤销选项

### 需求5：离线功能支持

**用户故事：** 作为经常在网络不稳定环境中使用应用的用户，我希望能够离线记录内容，以便随时捕捉重要时刻。

#### 验收标准

1. WHEN 设备离线时 THEN 系统 SHALL 仍然允许用户创建和编辑记录
2. WHEN 网络恢复时 THEN 系统 SHALL 自动同步离线创建的记录
3. WHEN 离线数据同步 THEN 系统 SHALL 处理潜在的数据冲突
4. IF 同步失败 THEN 系统 SHALL 通知用户并提供重试选项
5. WHEN 应用启动 THEN 系统 SHALL 显示离线记录的同步状态